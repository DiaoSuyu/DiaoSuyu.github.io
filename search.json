[{"title":"[Git] A useful guide of Git","url":"/2024/07/19/Git/Git/","content":"\nThis topic is used to record methods that are very useful in git.  \n\n1. Merge local Git repository into a specific Gerrit repository This topic is used to record how to merge a local Git repository(with multiple commit commit) into a specific Gerrit repository.  \n\nJump into your Gerrit directory\ncd /d/Project/SAM_TEST\n\nDisplays the commit history of the current branch, including author, date, and commit information\ngit log↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓$ git logcommit 50eec5571740b778fdc1310b596bb1f88b27ba11 (HEAD -&gt; MCU, origin/MCU)Author: diaosuyu &lt;diaosuyu@sk1999.com&gt;Date:   Fri Jul 19 16:13:10 2024 +0800    Initial MCU repository    Change-Id: Ief4a48e643427282357be4c6a6a54ee731294812commit b077e2c70c45947a329637a12f9c9f3ced1aecdb (origin/master, origin/HEAD,   master)Author: sunkaiwei &lt;sunkaiwei@sk1999.com&gt;Date:   Wed Jul 3 14:44:36 2024 +0800    Initial empty repository\n\nCreate and switch to a new branch named temp-branch, pointing the branch to the specific commit ID(in your Gerrit directory)\ngit checkout -b temp-branch 50eec5571740b778fdc1310b596bb1f88b27ba11↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓$ git checkout -b temp-branch 50eec5571740b778fdc1310b596bb1f88b27ba11Switched to a new branch &#x27;temp-branch&#x27;\n\nAdd the &#x2F;d&#x2F;Project&#x2F;MCU_I2C_Driver&#x2F;CRB directory as a remote repository of &#x2F;d&#x2F;Project&#x2F;SAM_TEST called temp-repo\ngit remote add temp-repo /d/Project/MCU_I2C_Driver/CRB\n\nGets the latest commit record from the temp-repo remote repository, but it doesn’t automatically merge into the current branch\ngit fetch temp-repo↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓$ git fetch temp-reporemote: Enumerating objects: 46795, done.remote: Counting objects: 100% (46795/46795), done.remote: Compressing objects: 100% (30625/30625), done.remote: Total 46795 (delta 15879), reused 43891 (delta 14840), pack-reused 0   (from 0)Receiving objects: 100% (46795/46795), 3.74 GiB | 3.84 MiB/s, done.Resolving deltas: 100% (15879/15879), done.From D:/Project/MCU_I2C_Driver/CRB * [new branch]          master      -&gt; temp-repo/master * [new branch]          temp_branch -&gt; temp-repo/temp_branch\n\nMerge the contents of the temp-repo&#x2F;master branch into the current branch (temp-branch)\ngit merge temp-repo/master --allow-unrelated-histories\n\nDisplays the status of the current working directory and staging area\ngit status\n\nDisplays the commit history of the current branch, including author, date, and commit information\ngit log\n\nPush the temp-branch branch to the master branch of the remote repository origin\ngit push origin temp-branch:refs/for/master\n\nDelete the local temp-branch branch\ngit branch -d temp-branch\n\n2. Check whether the commit record is missing Change-Id\nSave the code below as check_change_id.sh into your root repository\n#!/bin/bash# Go through each commitgit log --format=&quot;%H&quot; | while read commit_hash; do    # Get Commit Information    commit_message=$(git log -1 --format=%B &quot;$commit_hash&quot;)        # Check if the Change-Id exists    if echo &quot;$commit_message&quot; | grep -q &quot;Change-Id:&quot;; then        echo &quot;$commit_hash: Change-Id found&quot;    else        echo &quot;$commit_hash: Missing Change-Id&quot;    fidone\n\nAdd executable permissions\nchmod +x check_change_id.sh\n\nExecute check_change_id.sh\n./check_change_id.sh↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓1194b52298e7bda60cef2ec214de0f453d52fee1: Change-Id found11da9fea22d07d32555ef72e3be616dc4b60c4b2: Change-Id foundc92aa62a800ca64e2335a0443571ae25fe74f348: Change-Id found30d7c4ba9d88d1176431d540d82150e388640e5c: Change-Id found0fd82225a1c1ecafd4bccdb4b706d16a01d326e0: Change-Id found75557aeeeaa272fed582d6154f214a1bcd1bf2a5: Missing Change-Id0d649df8473c89a1ffb00e71ed4dea54bedfc3ed: Change-Id foundacaea09e73dfb99e058f5f6653e8128cca9ea860: Change-Id found0489bdd005eb05efd76d73538204c70e7fcc9f7a: Change-Id found037e43ec75b9b8258a81469ef080989b4c7e0bab: Change-Id foundca9c38e9ac3938783ebaf8a368815e0b80dfab88: Change-Id found0d139abb70c6f4057a84dc42c3dae6174d4d467d: Change-Id found8096abedf0749786fd1f77a4ddf8169b3f224525: Change-Id found5fdfdb378bf3e250b53bef811d629e12ccc32990: Change-Id founde414a5bbc8700428f58c043e280e2af7452d997e: Change-Id found16708024185cc2785b757bd14c4bbc3af928dd3e: Change-Id found9aef401122d031269fd7773c3b6c477bf12134f5: Change-Id foundcdc2680732fb3f85e69a10b80a242fffed8e592a: Change-Id foundb2daf1f0bce17420bb4eba1071ed9d997e0de50a: Change-Id foundbeedc2a23335de45b95ef550471b014a971e82e2: Change-Id found76d0b82220d1c623519b728e7bf2bcc82f521f95: Change-Id found1ff01138cec6c72f7415309ce7f5a68c4d9267b9: Change-Id found21de2e5bcbb64abce065930e2e4bd5bc80ac8448: Change-Id found5086c66cabc82960f88f80272ad07f8cedafa0d0: Change-Id found705eb6452c130a0685f96d83fef96479cc307497: Change-Id foundb29f9aaa1280e9063318be079f61daa9a420930f: Change-Id foundb28b16e765c40a4c7c4480be8aa6fc15f31303b1: Change-Id found9e5bf10c39a2655a0aa4dead56a91be785f34e9c: Missing Change-Id1e1ec902ba5db0c3cecb916099d78f8f163aafc1: Change-Id found18088669a6ea387f59379d2179eeb12eaedc1466: Change-Id found9fa1eca911c89547e47164ea9860fbfedac3c72d: Change-Id found061dd547c4a2281dbb7c1512fa799ac7521e41c1: Change-Id founda0c612cf37f9bca78f62415bb36c12e11e9937ee: Change-Id founddf936b8c55ced642b7345a9bfe7a0eb9224a0a0f: Change-Id found1eaccf9d4cb90a9cf84f05fbba53ba1fb6ee72d3: Change-Id found3f654fc1ec696baa94ee22628ee74faf8bc58da8: Change-Id foundc2543620e601e66cfea829b9dffd5b4b401ad843: Change-Id found29beef3cedcb55515071f091b87236a816fd0105: Change-Id foundb0e0fdd63a1aa46472102f67b163ba524348d812: Change-Id found0db39249b733c8e3ebe291c368f9ddf839b0a252: Change-Id found154965e9bff11e09fb32a6927babadffe426bb67: Change-Id found85a72c761ea3fb1681d34bfa790d32d13d533336: Change-Id found3503a78289b6e12f0eef69bee2c499370d5fbb3f: Change-Id foundbe7669b7d8fc757b2787ec588ea0de67358014c8: Change-Id found\n\nIf the change-id is missing, copy commit-msg to .git\\hooks\\\n\n\nthen, run the following command to add the change id\ngit rebase -i --root↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓pick 75557aeeeaa272fed582d6154f214a1bcd1bf2a5pick 9e5bf10c39a2655a0aa4dead56a91be785f34e9c...↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓edit 75557aeeeaa272fed582d6154f214a1bcd1bf2a5edit 9e5bf10c39a2655a0aa4dead56a91be785f34e9c...git commit --amendgit rebase --continue↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓$ git rebase --continueSuccessfully rebased and updated refs/heads/master.\n\n3. Git stash3.1 Temporarily save current changes\ngit stash push: temporarily store the changes on the stash stack\n\n-m: add a description for this stash\n\nchanges file path: the path(s) of the files you want to stash\ngit stash push -m &quot;stash for Dispatcher, FwVol, Image, PeiMain changes&quot;   MdeModulePkg/Core/Pei/Dispatcher/Dispatcher.c MdeModulePkg/Core/Pei/FwVol/FwVol.c\n\n3.2 Check the stash list\ngit stash list: use this command to check all stash object\ngit stash list↓↓↓↓↓↓↓↓↓↓↓↓↓↓stash@&#123;0&#125;: On branch-name: stash for Dispatcher, FwVol, Image, PeiMain changes\n\n3.3 Recover changes from the stash\ngit stash pop: recover the stash and remove it from the stash list\n\ngit stash apply: recover the stash and keep it in the stash list\ngit stash pop stash@&#123;0&#125;git stash apply stash@&#123;0&#125;\n\n3.4 Delete a stash recovered by git stash apply\ngit stash drop: delete a stash (for example one you already recovered with git stash apply)\ngit stash drop stash@&#123;0&#125;\n\n","categories":["Git"],"tags":["Git"]},{"title":"[Windbg] Blue screen debug method","url":"/2025/06/11/Windbg/Blue_screen_debug_method/Blue_screen_debug_method/","content":"\nThis topic is used to record How to use windbg for KMDF Driver blue screen debug based on the Analysis of Dump File.\n\n1. Grab the blue screen log\nFind out the blue screen log under this location C:\\WINDOWS\\Minidumpsuch as 061125-28265-01.dmp\n\n2. Debug with Windbg2.1 Load the log\nOpen Windbg, select File &gt; Open Crash Dump\nWait for loading\n\nMicrosoft (R) Windows Debugger Version 10.0.19041.685 AMD64Copyright (c) Microsoft Corporation. All rights reserved.Loading Dump File [C:\\Users\\Administrator\\Desktop\\WDF_error\\061125-28937-01.dmp]Mini Kernel Dump File: Only registers and stack trace are availableSymbol search path is: srv*Executable search path is: Windows 10 Kernel Version 26100 MP (24 procs) Free x64Product: WinNt, suite: TerminalServer SingleUserTSMachine Name:Kernel base = 0xfffff804`bfa00000 PsLoadedModuleList = 0xfffff804`c08f4aa0Debug session time: Wed Jun 11 14:37:42.041 2025 (UTC + 8:00)System Uptime: 0 days 0:05:25.322Loading Kernel Symbols......................................................................................................................................................................................................Loading User SymbolsLoading unloaded module list............For analysis of this file, run !analyze -v\n\n\nEnter the analysis command !analyze -v\n\n23: kd&gt; !analyze -v********************************************************************************                                                                             **                        Bugcheck Analysis                                    **                                                                             ********************************************************************************WDF_VIOLATION (10d)The Kernel-Mode Driver Framework was notified that Windows detected an errorin a framework-based driver. In general, the dump file will yield additionalinformation about the driver that caused this bug check.Arguments:Arg1: 0000000000000005, A framework object handle of the incorrect type was passed to\ta framework object method.Arg2: 0000000000000000, The handle value passed in.Arg3: 0000000000001201, Reserved.Arg4: ffffc6011d35ddd0, Reserved.Debugging Details:------------------*** WARNING: Unable to verify timestamp for StcMcuI2cDriver.sysKEY_VALUES_STRING: 1    Key  : Analysis.CPU.Sec    Value: 0    Key  : Analysis.DebugAnalysisProvider.CPP    Value: Create: 8007007e on SAM-DIAO    Key  : Analysis.DebugData    Value: CreateObject    Key  : Analysis.DebugModel    Value: CreateObject    Key  : Analysis.Elapsed.Sec    Value: 2    Key  : Analysis.Memory.CommitPeak.Mb    Value: 119    Key  : Analysis.System    Value: CreateObjectTAG_NOT_DEFINED_202b:  *** Unknown TAG in analysis list 202bDUMP_FILE_ATTRIBUTES: 0x21808  Kernel Generated Triage DumpBUGCHECK_CODE:  10dBUGCHECK_P1: 5BUGCHECK_P2: 0BUGCHECK_P3: 1201BUGCHECK_P4: ffffc6011d35ddd0BLACKBOXBSD: 1 (!blackboxbsd)BLACKBOXNTFS: 1 (!blackboxntfs)BLACKBOXPNP: 1 (!blackboxpnp)BLACKBOXWINLOGON: 1CUSTOMER_CRASH_COUNT:  1PROCESS_NAME:  MaxsunSyncServSTACK_TEXT:  ffff828a`3e186ea8 fffff804`520d30dc : 00000000`0000010d 00000000`00000005 00000000`00000000 00000000`00001201 : nt!KeBugCheckExffff828a`3e186eb0 fffff804`520612f8 : ffffc601`1eba7c00 ffffc601`1d35ddd0 00000000`00000000 000039fe`db480201 : Wdf01000!FxVerifierBugCheckWorker+0x24 [minkernel\\wdf\\framework\\shared\\object\\fxverifierbugcheck.cpp @ 87] ffff828a`3e186ef0 fffff804`68f02d67 : ffffc601`1d13dba0 ffffc601`1eba7c00 fffff804`68f07050 00000000`04001c04 : Wdf01000!imp_WdfIoTargetClose+0x118 [minkernel\\wdf\\framework\\shared\\targets\\general\\fxiotargetapi.cpp @ 620] ffff828a`3e186f60 ffffc601`1d13dba0 : ffffc601`1eba7c00 fffff804`68f07050 00000000`04001c04 ffffc601`1d35ddd0 : StcMcuI2cDriver+0x2d67ffff828a`3e186f68 ffffc601`1eba7c00 : fffff804`68f07050 00000000`04001c04 ffffc601`1d35ddd0 fffff804`68f0223f : 0xffffc601`1d13dba0ffff828a`3e186f70 fffff804`68f07050 : 00000000`04001c04 ffffc601`1d35ddd0 fffff804`68f0223f 000039fe`db4802d8 : 0xffffc601`1eba7c00ffff828a`3e186f78 00000000`04001c04 : ffffc601`1d35ddd0 fffff804`68f0223f 000039fe`db4802d8 ffffc601`1d8a36c0 : StcMcuI2cDriver+0x7050ffff828a`3e186f80 ffffc601`1d35ddd0 : fffff804`68f0223f 000039fe`db4802d8 ffffc601`1d8a36c0 000039fe`e275c938 : 0x4001c04ffff828a`3e186f88 fffff804`68f0223f : 000039fe`db4802d8 ffffc601`1d8a36c0 000039fe`e275c938 000039fe`db4802d8 : 0xffffc601`1d35ddd0ffff828a`3e186f90 000039fe`db4802d8 : ffffc601`1d8a36c0 000039fe`e275c938 000039fe`db4802d8 ffffc601`1d8a36c0 : StcMcuI2cDriver+0x223fffff828a`3e186f98 ffffc601`1d8a36c0 : 000039fe`e275c938 000039fe`db4802d8 ffffc601`1d8a36c0 ffffc601`1d8a3730 : 0x000039fe`db4802d8ffff828a`3e186fa0 000039fe`e275c938 : 000039fe`db4802d8 ffffc601`1d8a36c0 ffffc601`1d8a3730 00000000`04001c04 : 0xffffc601`1d8a36c0ffff828a`3e186fa8 000039fe`db4802d8 : ffffc601`1d8a36c0 ffffc601`1d8a3730 00000000`04001c04 fffff804`5205fde6 : 0x000039fe`e275c938ffff828a`3e186fb0 ffffc601`1d8a36c0 : ffffc601`1d8a3730 00000000`04001c04 fffff804`5205fde6 ffffc601`24b7fd20 : 0x000039fe`db4802d8ffff828a`3e186fb8 ffffc601`1d8a3730 : 00000000`04001c04 fffff804`5205fde6 ffffc601`24b7fd20 ffffc601`1d8a3890 : 0xffffc601`1d8a36c0ffff828a`3e186fc0 00000000`04001c04 : fffff804`5205fde6 ffffc601`24b7fd20 ffffc601`1d8a3890 000039fe`e275c938 : 0xffffc601`1d8a3730ffff828a`3e186fc8 fffff804`5205fde6 : ffffc601`24b7fd20 ffffc601`1d8a3890 000039fe`e275c938 00000000`00000000 : 0x4001c04ffff828a`3e186fd0 fffff804`5205eae9 : 00000000`00000000 fffff804`52104c28 00000000`0000000b ffffc601`1d8a36c0 : Wdf01000!FxIoQueue::DispatchRequestToDriver+0x296 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxioqueue.cpp @ 3448] ffff828a`3e187050 fffff804`5205b173 : ffffc601`1d8a36c0 fffff804`bfcf4c00 00000000`00000000 ffffc601`24b7fd20 : Wdf01000!FxIoQueue::DispatchEvents+0xa99 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxioqueue.cpp @ 3125] ffff828a`3e187160 fffff804`68f02ad1 : 000039fe`db480200 000039fe`e276d688 fffff804`68f07000 ffffc601`00000001 : Wdf01000!imp_WdfRequestForwardToIoQueue+0x343 [minkernel\\wdf\\framework\\shared\\core\\fxrequestapi.cpp @ 3130] ffff828a`3e187230 000039fe`db480200 : 000039fe`e276d688 fffff804`68f07000 ffffc601`00000001 ffffc601`24b7fd20 : StcMcuI2cDriver+0x2ad1ffff828a`3e187238 000039fe`e276d688 : fffff804`68f07000 ffffc601`00000001 ffffc601`24b7fd20 00000000`00000000 : 0x000039fe`db480200ffff828a`3e187240 fffff804`68f07000 : ffffc601`00000001 ffffc601`24b7fd20 00000000`00000000 0000000e`00000028 : 0x000039fe`e276d688ffff828a`3e187248 ffffc601`00000001 : ffffc601`24b7fd20 00000000`00000000 0000000e`00000028 00000000`00000000 : StcMcuI2cDriver+0x7000ffff828a`3e187250 ffffc601`24b7fd20 : 00000000`00000000 0000000e`00000028 00000000`00000000 00000000`00000000 : 0xffffc601`00000001ffff828a`3e187258 00000000`00000000 : 0000000e`00000028 00000000`00000000 00000000`00000000 00000000`04001c04 : 0xffffc601`24b7fd20SYMBOL_NAME:  StcMcuI2cDriver+2d67MODULE_NAME: StcMcuI2cDriverIMAGE_NAME:  StcMcuI2cDriver.sysSTACK_COMMAND:  .thread ; .cxr ; kbBUCKET_ID_FUNC_OFFSET:  2d67FAILURE_BUCKET_ID:  0x10D_5_StcMcuI2cDriver!unknown_functionOSPLATFORM_TYPE:  x64OSNAME:  Windows 10FAILURE_ID_HASH:  &#123;f601315d-5c7a-bc38-1801-2c856e4bfc93&#125;Followup:     MachineOwner---------\n\n\nSpecify the path to the .sys and .pdb (usually these two together)\n\n23: kd&gt; .sympath+ C:\\Users\\Administrator\\Desktop\\WDF_error\\1\\1.2\\sys\\x64\\ReleaseSymbol search path is: srv*;C:\\Users\\Administrator\\Desktop\\WDF_error\\1\\1.2\\sys\\x64\\ReleaseExpanded Symbol search path is: cache*;SRV*https://msdl.microsoft.com/download/symbols;c:\\users\\administrator\\desktop\\wdf_error\\1\\1.2\\sys\\x64\\release************* Path validation summary **************Response                         Time (ms)     LocationDeferred                                       srv*OK                                             C:\\Users\\Administrator\\Desktop\\WDF_error\\1\\1.2\\sys\\x64\\Release\n\n\nLoad your driver(.sys)\n\n23: kd&gt; .reload /f StcMcuI2cDriver.sys\n\n\nEnter the analysis command !analyze -v again\n\nThis time, you can see the specific code location of the error\n\n\n\n23: kd&gt; !analyze -v********************************************************************************                                                                             **                        Bugcheck Analysis                                    **                                                                             ********************************************************************************WDF_VIOLATION (10d)The Kernel-Mode Driver Framework was notified that Windows detected an errorin a framework-based driver. In general, the dump file will yield additionalinformation about the driver that caused this bug check.Arguments:Arg1: 0000000000000005, A framework object handle of the incorrect type was passed to\ta framework object method.Arg2: 0000000000000000, The handle value passed in.Arg3: 0000000000001201, Reserved.Arg4: ffffc6011d35ddd0, Reserved.Debugging Details:------------------KEY_VALUES_STRING: 1    Key  : Analysis.CPU.Sec    Value: 0    Key  : Analysis.DebugAnalysisProvider.CPP    Value: Create: 8007007e on SAM-DIAO    Key  : Analysis.DebugData    Value: CreateObject    Key  : Analysis.DebugModel    Value: CreateObject    Key  : Analysis.Elapsed.Sec    Value: 0    Key  : Analysis.Memory.CommitPeak.Mb    Value: 131    Key  : Analysis.System    Value: CreateObjectTAG_NOT_DEFINED_202b:  *** Unknown TAG in analysis list 202bDUMP_FILE_ATTRIBUTES: 0x21808  Kernel Generated Triage DumpBUGCHECK_CODE:  10dBUGCHECK_P1: 5BUGCHECK_P2: 0BUGCHECK_P3: 1201BUGCHECK_P4: ffffc6011d35ddd0BLACKBOXBSD: 1 (!blackboxbsd)BLACKBOXNTFS: 1 (!blackboxntfs)BLACKBOXPNP: 1 (!blackboxpnp)BLACKBOXWINLOGON: 1CUSTOMER_CRASH_COUNT:  1PROCESS_NAME:  MaxsunSyncServSTACK_TEXT:  ffff828a`3e186ea8 fffff804`520d30dc : 00000000`0000010d 00000000`00000005 00000000`00000000 00000000`00001201 : nt!KeBugCheckExffff828a`3e186eb0 fffff804`520612f8 : ffffc601`1eba7c00 ffffc601`1d35ddd0 00000000`00000000 000039fe`db480201 : Wdf01000!FxVerifierBugCheckWorker+0x24 [minkernel\\wdf\\framework\\shared\\object\\fxverifierbugcheck.cpp @ 87] ffff828a`3e186ef0 fffff804`68f02d67 : ffffc601`1d13dba0 ffffc601`1eba7c00 fffff804`68f07050 00000000`04001c04 : Wdf01000!imp_WdfIoTargetClose+0x118 [minkernel\\wdf\\framework\\shared\\targets\\general\\fxiotargetapi.cpp @ 620] ffff828a`3e186f60 fffff804`68f0223f : 000039fe`db4802d8 ffffc601`1d8a36c0 000039fe`e275c938 000039fe`db4802d8 : StcMcuI2cDriver!SpbPeripheralClose+0x8f [D:\\Project\\Drivers\\Windows\\SourceCode\\Pch_I2C\\Source\\1.2\\sys\\peripheral.cpp @ 129] ffff828a`3e186f90 fffff804`5205fde6 : ffffc601`24b7fd20 ffffc601`1d8a3890 000039fe`e275c938 00000000`00000000 : StcMcuI2cDriver!OnIoDeviceControl+0x1cf [D:\\Project\\Drivers\\Windows\\SourceCode\\Pch_I2C\\Source\\1.2\\sys\\device.cpp @ 706] ffff828a`3e186fd0 fffff804`5205eae9 : 00000000`00000000 fffff804`52104c28 00000000`0000000b ffffc601`1d8a36c0 : Wdf01000!FxIoQueue::DispatchRequestToDriver+0x296 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxioqueue.cpp @ 3448] ffff828a`3e187050 fffff804`5205b173 : ffffc601`1d8a36c0 fffff804`bfcf4c00 00000000`00000000 ffffc601`24b7fd20 : Wdf01000!FxIoQueue::DispatchEvents+0xa99 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxioqueue.cpp @ 3125] ffff828a`3e187160 fffff804`68f02ad1 : 000039fe`db480200 000039fe`e276d688 fffff804`68f07000 ffffc601`00000001 : Wdf01000!imp_WdfRequestForwardToIoQueue+0x343 [minkernel\\wdf\\framework\\shared\\core\\fxrequestapi.cpp @ 3130] ffff828a`3e187230 fffff804`5205fd38 : ffffc601`24b7fd01 ffffc601`1d35ddd0 ffffc601`24b7fd20 ffffc601`24b7fd20 : StcMcuI2cDriver!OnTopLevelIoDefault+0x121 [D:\\Project\\Drivers\\Windows\\SourceCode\\Pch_I2C\\Source\\1.2\\sys\\device.cpp @ 511] ffff828a`3e1872b0 fffff804`5205eae9 : fffff804`68f07000 fffff804`52104c28 00000000`0000000b ffffc601`1d892970 : Wdf01000!FxIoQueue::DispatchRequestToDriver+0x1e8 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxioqueue.cpp @ 3414] ffff828a`3e187330 fffff804`520793ec : ffffc601`1d892970 ffff828a`3e187800 00000000`00000000 00000002`00000048 : Wdf01000!FxIoQueue::DispatchEvents+0xa99 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxioqueue.cpp @ 3125] ffff828a`3e187440 fffff804`52078d89 : 00000000`00000000 ffffc601`23d6ca00 ffff828a`3e187800 fffff804`bfd41401 : Wdf01000!FxPkgIo::DispatchStep1+0x5ec [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxpkgio.cpp @ 324] ffff828a`3e187520 fffff804`520972e2 : ffffc601`23d6ca30 00000000`24b7fd20 ffffc601`1d13d8b0 fffff804`bfccdc39 : Wdf01000!FxPkgIo::Dispatch+0x59 [minkernel\\wdf\\framework\\shared\\irphandlers\\io\\fxpkgio.cpp @ 119] ffff828a`3e187580 fffff804`bfc987ed : 00000000`00000000 00000000`00000000 ffffc601`1d08c8d0 ffffc601`27122d10 : Wdf01000!FxDevice::DispatchWithLock+0x232 [minkernel\\wdf\\framework\\shared\\core\\fxdevice.cpp @ 1445] ffff828a`3e1875e0 fffff804`c02d33a8 : ffffc601`27122d10 ffff828a`3e187690 ffffc601`1d08c8d0 00000000`00000001 : nt!IofCallDriver+0xcdffff828a`3e187620 fffff804`c02d21f2 : 00000000`42dd2ce6 00000000`00000001 ffffc601`27122d10 00000000`00000001 : nt!IopSynchronousServiceTail+0x1c8ffff828a`3e1876d0 fffff804`c02d187e : 00000000`00000000 fffff804`bfcaaa80 00000000`00000000 00007ff8`ed5a58f0 : nt!IopXxxControlFile+0x962ffff828a`3e187940 fffff804`c00b7c55 : 00000267`bf8d27c0 00000267`bf9720a0 000000f5`6f8a1000 00000267`be7da980 : nt!NtDeviceIoControlFile+0x5effff828a`3e1879b0 00007ff9`59541be4 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : nt!KiSystemServiceCopyEnd+0x25000000f5`703ff728 00000000`00000000 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : 0x00007ff9`59541be4FAULTING_SOURCE_LINE:  D:\\Project\\Drivers\\Windows\\SourceCode\\Pch_I2C\\Source\\1.2\\sys\\peripheral.cppFAULTING_SOURCE_FILE:  D:\\Project\\Drivers\\Windows\\SourceCode\\Pch_I2C\\Source\\1.2\\sys\\peripheral.cppFAULTING_SOURCE_LINE_NUMBER:  129FAULTING_SOURCE_CODE:     125:         &quot;Closing handle to SPB target&quot;);   126:    127:     WdfIoTargetClose(pDevice-&gt;SpbController);   128: &gt;  129:     FuncExit(TRACE_FLAG_SPBAPI);   130:        131:     return STATUS_SUCCESS;   132: &#125;   133:    134: VOIDSYMBOL_NAME:  StcMcuI2cDriver!SpbPeripheralClose+8fMODULE_NAME: StcMcuI2cDriverIMAGE_NAME:  StcMcuI2cDriver.sysSTACK_COMMAND:  .thread ; .cxr ; kbBUCKET_ID_FUNC_OFFSET:  8fFAILURE_BUCKET_ID:  0x10D_5_StcMcuI2cDriver!SpbPeripheralCloseOSPLATFORM_TYPE:  x64OSNAME:  Windows 10FAILURE_ID_HASH:  &#123;862ad8cf-4de1-9dc0-849b-4a6423d819ac&#125;Followup:     MachineOwner---------23: kd&gt; ln StcMcuI2cDriver+0x8fBrowse moduleSet bu breakpoint(fffff804`68f01000)   StcMcuI2cDriver!OnDeviceAdd+0xffffffff`ffffffff   |  (fffff804`68f01740)   StcMcuI2cDriver!OnDriverCleanup\n","categories":["Windbg"],"tags":["Windbg"]},{"title":"[Windbg] Use windbg for dual-machine debugging","url":"/2024/09/19/Windbg/Dual_machine_network_commissioning/Dual_machine_network_commissioning/","content":"\nThis topic is used to record How to use windbg for dual-machine debugging.\n\n\nHost ip: 192.168.77.10\nClient ip: 192.168.77.35\n\n\n\nSet on client machine\n\n# 1. Execute the following command in CMD:bcdedit /set testsigning on        # Turn on Windows Test Modebcdedit /debug on                  # Enable kernel debugging for the Windows operating system associated with a specified startup item or the current startup itembcdedit /bootdebug on              # Enable startup debugging for the current or specified Windows operating system startup itemsbcdedit /set nointegritychecks on  # Enable digital signatures permanently# 2. Configure the debugging startup parameters of the target machinebcdedit /dbgsettings net hostip:192.168.77.10 port:50000 key:abcd1234.abcd1234.abcd1234.abcd1234# 3. Allow port 50000netsh advfirewall firewall add rule name=&quot;Windbg Debug&quot; dir=in action=allow protocol=TCP localport=50000# 4. Reboot client machineshutdown /r /t 0\n\n\nSet on host machine\n\n1. Open Windbg, select File &gt; Kernel Debug2. In the dialog box that pops up, select the NET tab3. In the Port field, enter the port number 50000 that you set on the target machine4. Enter the key you set in the Key field, abcd1234.abcd1234.abcd1234.abcd12345. Enter the IP address of the target machine in the Target IP field, 192.168.77.356. Adjust the printing level of debug messages, ed nt!Kd_DEFAULT_Mask 0xFFFFFFFF\n","categories":["Windbg"],"tags":["Windbg"]},{"title":"[Gerrit] 2. Configure Gerrit on Website","url":"/2024/06/29/Gerrit/Setup_SOP/2.%20Configure%20Gerrit%20on%20Website/Configure_Gerrit_on_Website/","content":"\nThis topic is used to record how to configure Gerrit on Website.You must have successfully completed the first chapter before you can execute this chapter.\n\n1. Login administrator account \n2. Create a user group for test   \n3. Create a Repository for test  \n","categories":["Gerrit"],"tags":["Gerrit"]},{"title":"[Jenkins] 1. Install Jenkins","url":"/2025/08/21/Jenkins/Setup_SOP/1.%20Install%20Jenkins/Install_Jenkins/","content":"\nThis topic is used to record how to set up the Jenkins server under Ubuntu.\n\n1. Environment\nOS: Ubuntu 22.04.4 LTS\nJenkins: 2.516.2\nJdk: 21.0.8\nLocal ip address: 192.168.77.199\n\n2. Configuration Steps2.1 Update the package listsudo apt-get update\n\n2.2 Install JDK 21sudo apt install -y openjdk-21-jre-headlessubuntu@ubuntu-VirtualBox:/media/sf_VirtualBoxShare/Jenkins_Workplace$ sudo apt install -y openjdk-17-jre-headlessReading package lists... DoneBuilding dependency tree... DoneReading state information... DoneSuggested packages:  fonts-ipafont-gothic fonts-ipafont-mincho fonts-wqy-microhei | fonts-wqy-zenheiThe following NEW packages will be installed:  openjdk-17-jre-headless0 upgraded, 1 newly installed, 0 to remove and 59 not upgraded.Need to get 48.3 MB of archives.After this operation, 193 MB of additional disk space will be used.Get:1 http://cn.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 openjdk-17-jre-headless amd64 17.0.16+8~us1-0ubuntu1~22.04.1 [48.3 MB]Fetched 48.3 MB in 3s (15.7 MB/s)                  Selecting previously unselected package openjdk-17-jre-headless:amd64.(Reading database ... 207010 files and directories currently installed.)Preparing to unpack .../openjdk-17-jre-headless_17.0.16+8~us1-0ubuntu1~22.04.1_amd64.deb ...Unpacking openjdk-17-jre-headless:amd64 (17.0.16+8~us1-0ubuntu1~22.04.1) ...Setting up openjdk-17-jre-headless:amd64 (17.0.16+8~us1-0ubuntu1~22.04.1) ...ubuntu@ubuntu-VirtualBox:/media/sf_VirtualBoxShare/Jenkins_Workplace$ java --versionopenjdk 21.0.8 2025-07-15OpenJDK Runtime Environment (build 21.0.8+9-Ubuntu-0ubuntu122.04.1)OpenJDK 64-Bit Server VM (build 21.0.8+9-Ubuntu-0ubuntu122.04.1, mixed mode, sharing)\n\n2.3 Create Jenkins_Workplace foldermkdir Jenkins_Workplace\n\n2.4 Download Jenkins 2.516.2 to Jenkins_Workplace folersudo wget -P ./ https://mirrors.jenkins.io/war-stable/2.516.2/jenkins.warubuntu@ubuntu-VirtualBox:/media/sf_VirtualBoxShare/Jenkins$ sudo wget -P ./ https://mirrors.jenkins.io/war-stable/2.516.2/jenkins.war[sudo] password for ubuntu: --2025-08-21 17:51:49--  https://mirrors.jenkins.io/war-stable/2.516.2/jenkins.warResolving mirrors.jenkins.io (mirrors.jenkins.io)... 20.7.178.24, 2603:1030:408:5::15aConnecting to mirrors.jenkins.io (mirrors.jenkins.io)|20.7.178.24|:443... connected.HTTP request sent, awaiting response... 302 FoundLocation: https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/2.516.2/jenkins.war [following]--2025-08-21 17:51:51--  https://mirrors.tuna.tsinghua.edu.cn/jenkins/war-stable/2.516.2/jenkins.warResolving mirrors.tuna.tsinghua.edu.cn (mirrors.tuna.tsinghua.edu.cn)... 101.6.15.130, 2402:f000:1:400::2Connecting to mirrors.tuna.tsinghua.edu.cn (mirrors.tuna.tsinghua.edu.cn)|101.6.15.130|:443... connected.HTTP request sent, awaiting response... 200 OKLength: 87485720 (83M) [application/java-archive]Saving to: ‘./jenkins.war’jenkins.war                100%[========================================&gt;]  83.43M  45.8MB/s    in 1.8s    2025-08-21 17:51:54 (45.8 MB/s) - ‘./jenkins.war’ saved [87485720/87485720]\n\n2.5 Install Jenkins 2.516.2 to Jenkins_Workplace folerjava -jar jenkins.war --httpPort=8000\n\n\nAfter executing the above command, the Jenkins engine is power on, the following is the log of the default configuration.\n\nubuntu@ubuntu-VirtualBox:/media/sf_VirtualBoxShare/Jenkins_Workplace$ java -jar jenkins.war --httpPort=8000Running from: /media/sf_VirtualBoxShare/Jenkins_Workplace/jenkins.warwebroot: /home/ubuntu/.jenkins/war2025-08-21 10:22:52.882+0000 [id=1]\tINFO\twinstone.Logger#logInternal: Beginning extraction from war file2025-08-21 10:22:52.930+0000 [id=1]\tWARNING\to.e.j.ee9.nested.ContextHandler#setContextPath: Empty contextPath2025-08-21 10:22:52.971+0000 [id=1]\tINFO\torg.eclipse.jetty.server.Server#doStart: jetty-12.0.22; built: 2025-06-02T15:25:31.946Z; git: 335c9ab44a5591f0ea941bf350e139b8c4f5537c; jvm 21.0.8+9-Ubuntu-0ubuntu122.04.12025-08-21 10:22:53.225+0000 [id=1]\tINFO\to.e.j.e.w.StandardDescriptorProcessor#visitServlet: NO JSP Support for /, did not find org.eclipse.jetty.ee9.jsp.JettyJspServlet2025-08-21 10:22:53.268+0000 [id=1]\tINFO\to.e.j.s.DefaultSessionIdManager#doStart: Session workerName=node02025-08-21 10:22:53.530+0000 [id=1]\tINFO\thudson.WebAppMain#contextInitialized: Jenkins home directory: /home/ubuntu/.jenkins found at: $user.home/.jenkins2025-08-21 10:22:53.624+0000 [id=1]\tINFO\to.e.j.s.handler.ContextHandler#doStart: Started oeje9n.ContextHandler$CoreContextHandler@7577b641&#123;Jenkins v2.516.2,/,b=file:///home/ubuntu/.jenkins/war/,a=AVAILABLE,h=oeje9n.ContextHandler$CoreContextHandler$CoreToNestedHandler@3704122f&#123;STARTED&#125;&#125;2025-08-21 10:22:53.630+0000 [id=1]\tINFO\to.e.j.server.AbstractConnector#doStart: Started ServerConnector@7561db12&#123;HTTP/1.1, (http/1.1)&#125;&#123;0.0.0.0:8000&#125;2025-08-21 10:22:53.635+0000 [id=1]\tINFO\torg.eclipse.jetty.server.Server#doStart: Started oejs.Server@57c758ac&#123;STARTING&#125;[12.0.22,sto=0] @1055ms2025-08-21 10:22:53.636+0000 [id=39]\tINFO\twinstone.Logger#logInternal: Winstone Servlet Engine running: controlPort=disabled2025-08-21 10:22:53.723+0000 [id=38]\tINFO\tjenkins.model.Jenkins#&lt;init&gt;: Starting version 2.516.22025-08-21 10:22:53.777+0000 [id=48]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Started initialization2025-08-21 10:22:53.782+0000 [id=55]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Listed all plugins2025-08-21 10:22:54.231+0000 [id=55]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Prepared all plugins2025-08-21 10:22:54.234+0000 [id=48]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Started all plugins2025-08-21 10:22:54.234+0000 [id=50]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Augmented all extensions2025-08-21 10:22:54.318+0000 [id=50]\tINFO\tjenkins.InitReactorRunner$1#onAttained: System config loaded2025-08-21 10:22:54.319+0000 [id=49]\tINFO\tjenkins.InitReactorRunner$1#onAttained: System config adapted2025-08-21 10:22:54.319+0000 [id=49]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Loaded all jobs2025-08-21 10:22:54.320+0000 [id=49]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Configuration for all jobs updated2025-08-21 10:22:54.333+0000 [id=75]\tINFO\thudson.util.Retrier#start: Attempt #1 to do the action check updates server2025-08-21 10:22:54.537+0000 [id=54]\tINFO\tjenkins.install.SetupWizard#init: ***************************************************************************************************************************************************************************************Jenkins initial setup is required. An admin user has been created and a password generated.Please use the following password to proceed to installation:2781b125f4cc45b6a912324b1e710b4bThis may also be found at: /home/ubuntu/.jenkins/secrets/initialAdminPassword***************************************************************************************************************************************************************************************2025-08-21 10:23:00.033+0000 [id=54]\tINFO\tjenkins.InitReactorRunner$1#onAttained: Completed initialization2025-08-21 10:23:00.045+0000 [id=38]\tINFO\thudson.lifecycle.Lifecycle#onReady: Jenkins is fully up and running2025-08-21 10:23:03.133+0000 [id=75]\tINFO\th.m.DownloadService$Downloadable#load: Obtained the updated data file for hudson.tasks.Maven.MavenInstaller2025-08-21 10:23:03.133+0000 [id=75]\tINFO\thudson.util.Retrier#start: Performed the action check updates server successfully at the attempt #1\n\n2.6 Try to login\nTry to entry http://192.168.77.119:8000 use browser\n\n\nInput the initialAdminPassword which you can find from &#x2F;home&#x2F;ubuntu&#x2F;.jenkins&#x2F;secrets&#x2F;initialAdminPassword and click Continue button\n\n\n2.7 Install plugins\nif no errors incur, you will see the plungins page\n\n\nclick the left one(Install suggested plugins)\n\n\n\n2.8 Create User Account\nif no errors incur, you will see the Create First Admin User page\n\n\nclick Skip and continue as admin button\n\n\n2.9 Instance Configuration\nif no errors incur, you will see the Instance Configuration page\n\n\nclick Save and Finish button\n\n\n2.10 Finish\nif no errors incur, you will see the ready page\n\nclick Save and Finish button\n\n\n2.11 Login\nEntry http://192.168.77.119:8000 use browser\n\nInput the initialAdminPassword which you can find from &#x2F;home&#x2F;ubuntu&#x2F;.jenkins&#x2F;secrets&#x2F;initialAdminPassword and click Sign in button\n\n\n\n\n3. Strongly Recommend Configuration3.1 Auto-start Jenkins on bootJenkins will automatically turn off after OS reboot, if you want Jenkins to turn on automatically every time that you turn on the device, please perform the following configuration.\n\nSet the Jenkins service to start automatically when ubuntu is powered on\n\n3.1.1 Create the Jenkins directorysudo mkdir -p /opt/jenkins\n\n3.1.2 Copy the Jenkins WAR file to the directorysudo cp /media/sf_VirtualBoxShare/Jenkins_Workplace/jenkins.war /opt/jenkins/\n\n3.1.3 Set ownership to the ubuntu usersudo chown -R ubuntu:ubuntu /opt/jenkins\n\n3.1.4 Create a Java TrustStore and import the Gerrit certificate\nRemove any existing TrustStore (if present):\nsudo rm -f /home/ubuntu/gerritTrustStore.jks\n\nCreate an empty TrustStore with a temporary key entry:\nsudo keytool -genkey -alias temp \\  -keystore /home/ubuntu/gerritTrustStore.jks \\  -storepass changeit \\  -keyalg RSA -keysize 2048 \\  -dname &quot;CN=temp&quot;\n\nDelete the temporary alias:\nsudo keytool -delete -alias temp \\  -keystore /home/ubuntu/gerritTrustStore.jks \\  -storepass changeit\n\nImport the Gerrit certificate into the TrustStore:\nsudo keytool -importcert -trustcacerts -alias gerrit \\  -file /home/ubuntu/Gerrit_Workplace/key/gerrit.crt \\  -keystore /home/ubuntu/gerritTrustStore.jks \\  -storepass changeit -noprompt\n\nVerify the certificate was imported successfully:\nsudo keytool -list -v -keystore /home/ubuntu/gerritTrustStore.jks -storepass changeit\n\n3.1.5 Create a systemd service file for Jenkinssudo nano /etc/systemd/system/jenkins.service# Add the following content:[Unit]Description=Jenkins ServerAfter=network.target[Service]User=ubuntuGroup=ubuntuWorkingDirectory=/opt/jenkinsExecStart=/usr/bin/java -Djavax.net.ssl.trustStore=/home/ubuntu/gerritTrustStore.jks -Djavax.net.ssl.trustStorePassword=changeit -jar /opt/jenkins/jenkins.war --httpPort=8000Restart=always[Install]WantedBy=multi-user.target\n\n3.1.6 Reload systemd to apply the new servicesudo systemctl daemon-reload\n\n3.1.7 Start Jenkins and enable it to auto-start on boot:sudo systemctl start jenkinssudo systemctl enable jenkinssudo systemctl status jenkins\n","categories":["Jenkins"],"tags":["Jenkins"]},{"title":"[Gerrit] 1. Install Gerrit","url":"/2024/02/24/Gerrit/Setup_SOP/1.%20Install%20Gerrit/Install_Gerrit/","content":"\nThis topic is used to record how to set up the gerrit server under Ubuntu.\n\n1. Environment\nOS: Ubuntu 22.04.4 LTS \nGit: 2.34.1\nJdk: 19.0.2\nagancha: 2.4.52\nGerrit: 3.10.0\nLocal ip address: 192.168.77.28\n\n2. Configuration Steps2.1 Update the package listsudo apt-get update\n\n2.2 Install Gitsudo apt install git\n\n2.3 Install Jdksudo sudo apt install openjdk-19-jre-headless\n\n2.4 Install Apache2sudo sudo apt install apache2\n\n2.5 Create Gerrit_Workplace folder under Home sitemkdir Gerrit_Workplace\n\n2.6 Download Gerrit 3.10.0 to Gerrit_Workplace folersudo wget -P /home/administrator/Gerrit_Workplace/ https://gerrit-releases.storage.googleapis.com/gerrit-3.10.0.war\n\n2.7 Install Gerrit 3.10.0 to Gerrit_Workplace folerjava -jar /home/administrator/Gerrit_Workplace/gerrit-3.10.0.war init -d /home/administrator/Gerrit_Workplace/\n\n\nAfter executing the above command, you will enter the configuration interface of gerrit, please press enter to execute the default configuration except [Plugins] part, and we will modify the configuration in step 8, the following is the log of the default configuration.\nUsing secure store: com.google.gerrit.server.securestore.DefaultSecureStore[2024-06-29 10:51:45,119] [main] INFO    com.google.gerrit.server.config.GerritServerConfigProvider : No   /home/administrator/Gerrit_Workplace/etc/gerrit.config; assuming defaults*** Gerrit Code Review 3.10.0*** *** Git Repositories*** Location of Git repositories   [git]: *** JGit Configuration*** Auto-configured &quot;receive.autogc = false&quot; to disable auto-gc after git-  receive-pack.*** Index*** Type                           [lucene]: *** User Authentication*** Authentication method          [openid/?]: Enable signed push support     [y/N]? *** Review Labels*** Install Verified label         [y/N]? *** Email Delivery*** SMTP server hostname           [localhost]: SMTP server port               [(default)]: SMTP encryption                [none/?]: SMTP username                  : *** Container Process*** Run as                         [administrator]: Java runtime                   [/usr/lib/jvm/java-19-openjdk-amd64]: Copy gerrit-3.10.0.war to /home/administrator/Gerrit_Workplace/bin/gerrit.war   [Y/n]? Copying gerrit-3.10.0.war to   /home/administrator/Gerrit_Workplace/bin/gerrit.war*** SSH Daemon*** Listen on address              [*]: Listen on port                 [29418]: Generating SSH host key ... rsa... ed25519... ecdsa 256... ecdsa 384... ecdsa   521... done*** HTTP Daemon*** Behind reverse proxy           [y/N]? Use SSL (https://)             [y/N]? Listen on address              [*]: Listen on port                 [8080]: Canonical URL                  [http://administrator-Default-string:8080/]: *** Cache*** *** Plugins*** Installing plugins.Install plugin codemirror-editor version v3.10.0 [y/N]? yInstalled codemirror-editor v3.10.0Install plugin commit-message-length-validator version v3.10.0 [y/N]? yInstalled commit-message-length-validator v3.10.0Install plugin delete-project version v3.10.0 [y/N]? yInstalled delete-project v3.10.0Install plugin download-commands version v3.10.0 [y/N]? yInstalled download-commands v3.10.0Install plugin gitiles version v3.10.0 [y/N]? yInstalled gitiles v3.10.0Install plugin hooks version v3.10.0 [y/N]? yInstalled hooks v3.10.0Install plugin plugin-manager version v3.10.0 [y/N]? yInstalled plugin-manager v3.10.0Install plugin replication version v3.10.0 [y/N]? yInstalled replication v3.10.0Install plugin reviewnotes version v3.10.0 [y/N]? yInstalled reviewnotes v3.10.0Install plugin singleusergroup version v3.10.0 [y/N]? yInstalled singleusergroup v3.10.0Install plugin webhooks version v3.10.0 [y/N]? yInstalled webhooks v3.10.0Initializing plugins.Jun 29, 2024 10:56:11 AM   org.apache.lucene.store.MemorySegmentIndexInputProvider &lt;init&gt;INFO: Using MemorySegmentIndexInput with Java 19; to disable start with -  Dorg.apache.lucene.store.MMapDirectory.enableMemorySegments=false============================================================================Welcome to the Gerrit communityFind more information on the homepage: https://www.gerritcodereview.comDiscuss Gerrit on the mailing list: https://groups.google.com/g/repo-discuss============================================================================Initialized /home/administrator/Gerrit_WorkplaceInit complete, reindexing accounts,changes,groups,projects with: reindex --  site-path /home/administrator/Gerrit_Workplace --threads 1 --index accounts -  -index changes --index groups --index projectsReindexed 0 documents in   accounts index in 0.0s (0.0/s)Index accounts in version 14 is readyReindexing groups:      100% (2/2)Reindexed 2 documents in groups index in 0.1s (15.6/s)Index groups in version 11 is readyReindexing changes: Slicing projects: 100% (2/2), done    Reindexed 0 documents in changes index in 0.5s (0.0/s)Index changes in version 86 is readyReindexing projects:    100% (2/2)Reindexed 2 documents in projects index in 0.1s (27.4/s)Index projects in version 9 is ready\n\n2.8 Modify the installation configuration\nSwtich the path of terminal to &#x2F;home&#x2F;administrator&#x2F;Gerrit_Workplace&#x2F;etc&#x2F;\ncd /home/administrator/Gerrit_Workplace/etc/\n\nView gerrit.config, the below is the default configuration  \nvim gerrit.config [or] gedit gerrit.config\n\n# default gerrit.config:[gerrit] basePath = git canonicalWebUrl = http://administrator-Default-string:8080/ serverId = 9cbbca33-3ef1-4a00-ace1-35d249b377aa[container] javaOptions = &quot;-  Dflogger.backend_factory=com.google.common.flogger.backend.log4j.Log4jBackend  Factory#getInstance&quot; javaOptions = &quot;-  Dflogger.logging_context=com.google.gerrit.server.logging.LoggingContext#getI  nstance&quot; user = administrator javaHome = /usr/lib/jvm/java-19-openjdk-amd64[index] type = lucene[auth] type = OPENID[receive] enableSignedPush = false[sendemail] smtpServer = localhost[sshd] listenAddress = *:29418[httpd] listenUrl = http://*:8080/[cache] directory = cache\n\nModify gerrit.config, the below is the modified configuration  \nsudo vim gerrit.config [or] sudo gedit gerrit.config\n\n# Modify gerrit.config[gerrit] # The base path where the Git repository is stored basePath = git  # The URL of the Gerrit web interface canonicalWebUrl = https://192.168.77.28:8081/  # A unique identifier for a Gerrit server serverId = 9cbbca33-3ef1-4a00-ace1-35d249b377aa  [container] # Configure the logging backend javaOptions = &quot;-  Dflogger.backend_factory=com.google.common.flogger.backend.log4j.Log4jBackend  Factory#getInstance&quot;  # Configure the logging context javaOptions = &quot;-  Dflogger.logging_context=com.google.gerrit.server.logging.LoggingContext#getI  nstance&quot;  # The user who will run Gerrit services user = administrator  # The path to the Java runtime environment javaHome = /usr/lib/jvm/java-19-openjdk-amd64  [index] # Use Lucene as the index backend type = lucene  [auth] # # Use HTTP authentication type = HTTP  # Usernames are not case-sensitive userNameCaseInsensitive = true[receive] # Disable signature push enableSignedPush = false[sendemail] # Enable email sending enable = true  # SMTP server address smtpServer = smtp.sk1999.com  # SMTP server port smtpServerPort = 465    # SMTP users smtpUser = diaosuyu@sk1999.com  # The sender&#x27;s address when sending the message from = Code Review &lt;diaosuyu@sk1999.com&gt;  # SSL encryption is used smtpEncryption = ssl  # Disable SSL validation sslVerify = false  # SMTP user password smtpPass = VTHRtCdf9ytdsQxJ[sshd] # SSHD listening address and port listenAddress = *:29418[httpd] # URL of the HTTPD listener listenUrl = proxy-https://192.168.77.28:8080/[cache] # Cache directory directory = cache[log] # Logging level level = DEBUG\n\nSwtich the path of terminal to &#x2F;home&#x2F;administrator&#x2F;Gerrit_Workplace&#x2F;\ncd /home/administrator/Gerrit_Workplace/\n\nCreate key folder and create SSL Certificate\nmkdir keycd key/openssl req -x509 -nodes -days 365 \\  -newkey rsa:2048 \\  -keyout gerrit.key \\  -out gerrit.crt \\  -subj &quot;/C=AU/ST=Some-State/O=Internet Widgits Pty Ltd/CN=192.168.77.28&quot; \\  -addext &quot;subjectAltName=IP:192.168.77.28&quot;\n\n2.9 Modify the Apache2 configuration\nSwtich the path of terminal to &#x2F;etc&#x2F;apache2\ncd /etc/apache2\n\nCreate a new file named gerrit_httpd.conf\nsudo touch gerrit_httpd.conf\n\nModify gerrit_httpd.conf\nsudo vim gerrit_httpd.conf [or] sudo gedit gerrit_httpd.conf\n\n# gerrit_httpd.conf:&lt;VirtualHost *:8081&gt;    ServerName 192.168.77.40    ProxyRequests Off    ProxyVia Off    ProxyPreserveHost On    SSLEngine on    SSLCertificateFile /home/administrator/Gerrit_Workplace/key/gerrit.crt    SSLCertificateKeyFile /home/administrator/Gerrit_Workplace/key/gerrit.key        &lt;Proxy *&gt;          Order deny,allow          Allow from all    &lt;/Proxy&gt;    &lt;Location /login/&gt;      AuthType Basic      AuthName &quot;Gerrit Code Review&quot;      Require valid-user      AuthBasicProvider file      AuthUserFile /home/administrator/Gerrit_Workplace/users/gerrit.password     &lt;/Location&gt;    AllowEncodedSlashes On    ProxyPass / http://192.168.77.40:8080/ nocanon    ProxyPassReverse / http://192.168.77.40:8080/ nocanon&lt;/VirtualHost&gt;\n\nModify ports.conf, adds a listen on port 8081\nsudo vim ports.conf [or] sudo gedit ports.conf\n\n# ports.conf:# If you just change the port or add more ports here, you will likely also# have to change the VirtualHost statement in# /etc/apache2/sites-enabled/000-default.confListen 80&lt;IfModule ssl_module&gt; Listen 443&lt;/IfModule&gt;&lt;IfModule mod_gnutls.c&gt; Listen 443&lt;/IfModule&gt;# &lt;Sam_Diao-20240629&gt;+# For gerrit server useListen 8081# &lt;Sam_Diao-20240629&gt;-# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n\nModify apache2.conf, Include gerrit_httpd.conf at the end of apache2.conf\nsudo vim apache2.conf [or] sudo gedit apache2.conf\n\n# at the end of apache2.conf:# &lt;Sam_Diao-20240629&gt;+# For gerrit server useInclude gerrit_httpd.conf# &lt;Sam_Diao-20240629&gt;-\n\nExecute the following command\nsudo a2enmod proxysudo a2enmod proxy_httpsudo a2enmod proxy_balancersudo a2enmod auth_basicsudo a2enmod headerssudo a2enmod lbmethod_byrequests\n\nSwtich the path of terminal to &#x2F;etc&#x2F;apache2&#x2F;mods-enabled\ncd /etc/apacha2/mods-enabled\n\nExecute the following command\nsudo ln -s proxy.loadsudo ln -s proxy.confsudo ln -s proxy_http.loadsudo ln -s proxy_balancer.confsudo ln -s proxy_balancer.loadsudo ln -s rewrite.loadsudo ln -s ssl.confsudo ln -s ssl.loadsudo ln -s slotmem_shm.loadsudo ln -s socache_shmcb.load\n\n2.10 Create a login authentication file under Gerrit_Workplace\nSwtich the path of terminal to &#x2F;home&#x2F;administrator&#x2F;Gerrit_Workplace&#x2F;\ncd /home/administrator/Gerrit_Workplace/\n\nCreate users folder for save name and password of users who will login gerrit\nmkdir users\n\nSwtich the path of terminal to users&#x2F;\ncd users/\n\nCreate an administrator accout for gerrit\nhtpasswd -c gerrit.password administrator\n\nbash log:$ htpasswd -c gerrit.password administratorNew password: Re-type new password: Adding password for user administrator\n\nCreate an guest accout for gerrit\nhtpasswd -m gerrit.password guest\n\nbash log:$ htpasswd -m gerrit.password guestNew password: Re-type new password: Adding password for user guest\n\n2.11 Modify the access permission of Apache2\nApache2 is run as a www-data user by default, use the following command to determine what the user is.\nps aux | grep apache2\n\ngerrit.password is created by administrator, other users have no permission to access, like user www-data, so we need to add www-data into group of administrator, then www-data can access gerrit.password.\nsudo usermod -aG administrator www-data\n\n2.12 Restart the Gerrit and Apache2\nSwtich the path of terminal to &#x2F;home&#x2F;administrator&#x2F;Gerrit_Workplace&#x2F;bin\ncd /home/administrator/Gerrit_Workplace/bin\n\nRestart Gerrit.\nsudo ./gerrit.sh restart\n\nEnable the SSL module and site configuration, then restart Apache2.\nsudo a2enmod sslsudo a2ensite default-sslsudo systemctl restart apache2\n\nTips: The following commands or files are used to check and correct errors in the event of errors:\n1. sudo systemctl status apache22. journalctl -xeu apache2.service3. /var/log/apache2/error.log4. /home/administrator/Gerrit_Workplace/log/error_log\n\n3. Login Verification3.1 Open browser and login\nOpen browser and enter 192.168.77.28:8081, then enter the name and password of the administrator account that you have just registered.\n192.168.77.28:8081\n\n\n\n\n3.2 Check dashboard\nif everything is working properly then will go to dashboard automatically.\n\n\n\n3.3 Check administrator account settings\nClick the username in the top right corner, and then click Setting, if everything is working properly, the account ID is 1000000 that means administrator is super manager(By default, the account for this number is super manager).\n\n\n\n3.4 Check guest account settings\nIn the same way, you can check the information of the guest account and note that the guest account does not have administrative privileges.\n\n\n\n4. Option Configuration4.1 Auto-start Gerrit and Apache2 on boot\nGerrit will automatically turn off after os reboot, if you want Gerrit to turn on automatically every time that you turn on the device, please perform the following configuration.\n\nSet the gerrit service to start automatically when ubuntu is powered on\nsudo vim /etc/systemd/system/gerrit.service# Add the following Setting[Unit]Description=Gerrit Code ReviewAfter=network.target[Service]Type=forkingUser=administratorExecStart=/home/administrator/Gerrit_Workplace/bin/gerrit.sh restartExecStop=/home/administrator/Gerrit_Workplace/bin/gerrit.sh stopWorkingDirectory=/home/administrator/Gerrit_WorkplaceRestart=on-failure[Install]WantedBy=multi-user.target\n\nApache2 auto start\nsudo systemctl daemon-reloadsudo systemctl enable apache2sudo systemctl enable gerritsudo systemctl start apache2sudo systemctl start gerrit\n\nApache2 Status check\nsudo systemctl status apache2sudo systemctl status gerrit\n\n4.2 Configure static IP address\nBy default, dynamic IP addresses are used, if you wish to use a static IP address, please use this section to set the settings.\n\nConfigure static ip address\n\nEnable the management of specific network interfaces\nsudo vim /etc/NetworkManager/NetworkManager.conf   [main]  plugins=ifupdown,keyfile  [ifupdown]  managed=true  [device]  wifi.scan-rand-mac-address=nosudo systemctl restart NetworkManager\n\nSet network for access external web\nsudo vim /etc/resolv.conf# add at the bottomnameserver 8.8.8.8nameserver 8.8.4.4sudo service NetworkManager stopsudo rm /var/lib/NetworkManager/NetworkManager.statesudo service NetworkManager start\n\n4.3 Ensure Apache Can Access Gerrit’s Directory on External Hard Drive\nIf you’re setting up Gerrit on an external hard drive and sharing the folder for access by Ubuntu, you may encounter issues where Apache cannot access the Gerrit password file. Follow these steps to resolve potential access problems:\n\n4.3.1 Ensure Apache Can Access the Directory\nThe directory itself must also have read permissions for the Apache user (www-data). Run the following command to ensure the /media/sf_VirtualBox/Gerrit_Workplace/users/ directory is accessible:\nsudo chmod 755 /media/sf_VirtualBox/Gerrit_Workplace/users\n\n4.3.2 Modify File Permissions\nEnsure that the gerrit.password file is readable by the owner, group members, and others by using the following command:\nsudo chmod 644 /media/sf_VirtualBox/Gerrit_Workplace/users/gerrit.password\n\nThis will grant read permissions to root, the vboxsf group, and others.\n\n\n4.3.3 Check If www-data Has Permissions\nIf the permissions are correctly set but the problem persists, it may be because the www-data user is not part of the group for that directory. You can add the www-data user to the vboxsf group to give it access to the directory and files:\nsudo usermod -aG vboxsf www-data\n\n4.3.4 Restart Apache\nThen restart Apache so the www-data user can gain access:\nsudo systemctl restart apache2\n\n4.3.5 Confirm vboxsf Group Permissions\nEnsure the vboxsf group has appropriate permissions for the /media/sf_VirtualBox/ directory and all of its subdirectories and files. Use the following command to check the directory’s permissions:\nls -l /media/sf_VirtualBox\n\n","categories":["Gerrit"],"tags":["Gerrit"]},{"title":"[Jenkins] 2. Configure Jenkins on Website","url":"/2025/08/22/Jenkins/Setup_SOP/2.%20Configure%20Jenkins%20on%20Website/Configure_Jenkins_on_Website/","content":"\nThis topic is used to record how to configure Jenkins on Website.You must have successfully completed the first chapter before you can execute this chapter.\n\n1. Environment\nOS: Ubuntu 22.04.4 LTS\nGerrit: 3.12.2\nJenkins: 2.516.2\nJdk: 21.0.8\nLocal ip address: 192.168.77.199\n\n2. Create the Jenkins user for gerrit2.1 Swtich the path of terminal to Gerrit_Workplace&#x2F;users&#x2F;cd Gerrit_Workplace/users/\n\n2.2 Create an jenkins account for gerrithtpasswd -m gerrit.password jenkinsNew password: Re-type new password: Adding password for user jenkins\n\n2.3 Set jenkins account as an Service Users\nLogin with administrator account\n\n2.4 Generate ssh key on the server which is login jenkinsssh-keygen -t rsa -b 4096 -C &quot;jenkins_dev@dev.com&quot;\n\n2.5 Copy the content of id_rsa.pub to gerritcd ~/.sshubuntu@ubuntu-VirtualBox:~/.ssh$ ls -ltotal 20-rw------- 1 ubuntu ubuntu 3381  8月 22 17:17 id_rsa-rw-r--r-- 1 ubuntu ubuntu  745  8月 22 17:17 id_rsa.pub\n\n\nLogin with jenkins account, and copy id_rsa.pub to New SSH key\n\n3. Make sure that plugin Gerrit Trigger is installed\nLogin admin account\nCheck Gerrit Trigger is exist under installed plugins page, if everything is ok, you will see this like below:\nif it is not exist, go to Available plugins page, search Gerrit Trigger then install it\n\n4. Setting Gerrit Trigger4.1 Select Gerrit Trigger on the bottom  \n4.2 Select New Server  \n4.3 Setting Gerrit Connection Setting  \n4.4 Configure the necessary item   \n4.5 Setting REST API\nGenerate New Password under HTTP Credentials bar in gerrit setting page, you should login witch user: jenkins\nInput your gerrit user: jenkins to under Use REST API bar\nCopy New Password to Gerrit HTTP Password under Use REST API bar\nClick Test REST Connection, if everything is ok, the test will pass\n\n4.6 If everything is ok, Gerrit Servers status will be a green pass logo  \n","categories":["Jenkins"],"tags":["Jenkins"]},{"title":"[Gerrit] 3. Configure Windows Oa of Users","url":"/2024/07/04/Gerrit/Setup_SOP/3.%20Configure%20Windows%20Oa%20of%20Users/Configure_Windows_Oa_Of_Users/","content":"\nThis topic is used to record how to configure Windows Oa of Users.You must have successfully completed the first and second chapter before you can execute this chapter.\n\n1. Login your account  \n2. Verify your Email  \n\nYou will receive a verification email, then open the link in the email.\n\n\nThe email address has been verified.\n\n\n\n3. Configure SSH Keys\nOpen your Git Bash anywhere, then run the command down below:\nssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;\n\n \n\nFollow the prompt address to locate the public key and copy it to the SSH Keys bar\n\n \n4. Configure your information under Git4.1 Configure Git with Git Bash\nOpen your Git Bash anywhere, then run the command down below:  \n\nuser.name is the username you just logged into gerrit  \n\nuser.email is the address you just used to authenticate your email address  \nexample:git config --global user.name &quot;Sam_Diao&quot;git config --global user.email &quot;your_email@example.com&quot;\n\n4.2 Configure Git with TortoiseGit\nIf you want to use TortoiseGit instead of Git Bash, Here’s what you need to do:\nPlease note that the below three steps require you to install TortoiseGit correctly!\n\n4.2.1 Generate SSH keys with PuttyGen\nRun puttygen.exe to create a public-private key pair, input your name to Key comment bar, then save public and private key.\n\n\n\n4.2.2 Copy public key to SSH Keys\nUsing the same method as above, copy the public key which has generated by puttygen.exe to the SSH Keys bar.\n\n4.2.3 Configure Pageant with private key\nRun pageant.exe and add the private key which has generated by puttygen.exe to Pegeant Key List, like this:\n\n\n\n5. Copy [commit-msg] to your Git hooks folder\nFor example, my git hooks folder is C:\\Software\\Git\\mingw64\\share\\git-core\\templates\\hooks\n\n \n6. Test Workflow6.1 Clone the test repository in gerrit with Git Bash \n\nIf you encounter the following problem:\n\nCloning into &#x27;SuZhou_Test&#x27;...@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that a host key has just been changed.The fingerprint for the ED25519 key sent by the remote host isSHA256:U3AS9BcRFdnpRSfzDe4k/Jipa1sk2ez5XaTxRehpw4k.Please contact your system administrator.Add correct host key in /c/Users/Administrator/.ssh/known_hosts to get rid of this message.Offending ED25519 key in /c/Users/Administrator/.ssh/known_hosts:1Host key for [192.168.77.28]:29418 has changed and you have requested strict checking.Host key verification failed.fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists.\n\n\nPlease run this command to fix:\n\nssh-keygen -R [192.168.77.28]:29418\n\n6.2 Perpare test file\nCreate a file named UploadTest.txt in the test repository and input something, then save this file:\n\n \n6.3 Push test file to Gerrit with Git Bashgit add UploadTest.txtgit commit -m &quot;push test file to Gerrit&quot;git push origin head:refs/for/master\n\n \n\nIf you have this pop-up window appearing:\n\n \n\nThe Username is your gerrit account name, not your email address, please get the password from here:\n\n \n7. Review your code commits in Gerrit \n","categories":["Gerrit"],"tags":["Gerrit"]}]